import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';
import AsyncStorage from '@react-native-async-storage/async-storage';
import * as Localization from 'expo-localization';

// Ресурсы переводов
const resources = {
  en: {
    translation: {
      appName: "KoreanStore",
      splash: {
        loading: "Loading...",
      },
      onboarding: {
        title1: "Find & Buy Korean Products",
        description1: "Discover authentic Korean cosmetics, snacks, and fashion items",
        title2: "Fast & Reliable Delivery",
        description2: "Get your orders delivered quickly with real-time tracking",
        title3: "Order Tracking",
        description3: "Track your order status at every step of the journey",
        title4: "Secure Payments",
        description4: "Multiple secure payment options for your peace of mind",
        next: "Next",
        skip: "Skip",
        getStarted: "Get Started",
      },
      common: {
        continue: "Continue",
        skip: "Skip",
        back: "Back",
        "cancel": "Cancel",
        "save": "Save",
        "done": "Done",
        "edit": "Edit",
        "delete": "Delete",
        "confirm": "Confirm",
        "next": "Next",
        "previous": "Previous",
        "loading": "Loading...",
        "error": "Error",
        "success": "Success",
        "warning": "Warning",
        "info": "Info",
      },
      auth: {
        login: "Login",
        register: "Register",
        email: "Email",
        phone: "Phone",
        password: "Password",
        confirmPassword: "Confirm Password",
        firstName: "First Name",
        lastName: "Last Name",
        forgotPassword: "Forgot Password?",
        noAccount: "Don't have an account?",
        hasAccount: "Already have an account?",
        signIn: "Sign In",
        signUp: "Sign Up",
        createAccount: "Create Account",
        orContinueWith: "Or continue with",
        rememberMe: "Remember me",
        validation: {
          required: "This field is required",
          invalidEmail: "Invalid email address",
          invalidPhone: "Invalid phone number",
          passwordLength: "Password must be at least 6 characters",
          passwordMismatch: "Passwords do not match",
          weakPassword: "Password is too weak",
        },
        errors: {
          invalidCredentials: "Invalid email or password",
          emailExists: "Email already exists",
          networkError: "Network error. Please try again",
          unknownError: "Something went wrong",
        },
        success: {
          login: "Login successful",
          registration: "Registration successful",
        },
      },
      home: {
        title: "KoreanStore",
        searchPlaceholder: "Search products...",
        categories: "Categories",
        seeAll: "See All",
        featured: "Featured Products",
        newArrivals: "New Arrivals",
        bestSellers: "Best Sellers",
        specialOffers: "Special Offers",
        addToCart: "Add to Cart",
        outOfStock: "Out of Stock",
        sale: "Sale",
        new: "New",
        price: "Price",
        sort: {
          default: "Default",
          priceLowHigh: "Price: Low to High",
          priceHighLow: "Price: High to Low",
          newest: "Newest",
          popularity: "Popularity",
          rating: "Rating",
        },
        filter: {
          title: "Filter",
          apply: "Apply Filters",
          clear: "Clear All",
          category: "Category",
          priceRange: "Price Range",
          rating: "Rating",
          availability: "Availability",
          inStock: "In Stock Only",
        },
      },
      categories: {
        cosmetics: "Cosmetics",
        skincare: "Skincare",
        snacks: "Snacks",
        fashion: "Fashion",
        homeDecor: "Home Decor",
        electronics: "Electronics",
        all: "All Products",
      },
      search: {
        title: "Search Products",
        placeholder: "What are you looking for?",
        recentSearches: "Recent Searches",
        popularSearches: "Popular Searches",
        clearRecent: "Clear Recent",
        noResults: "No products found",
        suggestions: "Try searching for:",
        categories: "Search by Categories",
        resetFilters: "Reset Filters",
        applyFilters: "Apply Filters",
        price: "Price",
        minPrice: "Min Price",
        maxPrice: "Max Price",
        sortBy: "Sort By",
        filters: "Filters",
        results: "results",
        showing: "Showing",
        of: "of",
      },
      filters: {
        newArrivals: "New Arrivals",
        onSale: "On Sale",
        inStock: "In Stock",
        outOfStock: "Out of Stock",
        freeShipping: "Free Shipping",
        highRated: "High Rated (4.5+)",
        brands: "Brands",
        colors: "Colors",
        sizes: "Sizes",
        all: "All",
        apply: "Apply",
        clearAll: "Clear All",
        priceRange: "Price Range",
        customerRating: "Customer Rating",
        availability: "Availability",
        shipping: "Shipping",
        brand: "Brand",
        color: "Color",
        size: "Size",
        pending: "Pending",
        processing: "Processing",
        shipped: "Shipped",
        delivered: "Delivered",
        cancelled: "Cancelled",
        returned: "Returned",
        last30Days: "Last 30 Days",
        last6Months: "Last 6 Months",
        lastYear: "Last Year",
        customRange: "Custom Range",
      },
      sort: {
        relevance: "Relevance",
        newest: "Newest",
        priceLowHigh: "Price: Low to High",
        priceHighLow: "Price: High to Low",
        popularity: "Popularity",
        rating: "Rating",
        bestMatch: "Best Match",
      },
      product: {
        addToCart: "Add to Cart",
        buyNow: "Buy Now",
        description: "Description",
        specifications: "Specifications",
        reviews: "Reviews",
        relatedProducts: "Related Products",
        share: "Share",
        favorite: "Add to Favorites",
        removeFavorite: "Remove from Favorites",
        inStock: "In Stock",
        outOfStock: "Out of Stock",
        quantity: "Quantity",
        shipping: "Shipping",
        freeShipping: "Free Shipping",
        estimatedDelivery: "Estimated Delivery",
        days: "days",
        color: "Color",
        size: "Size",
        selectOption: "Select Option",
        sellerInfo: "Seller Information",
        contactSeller: "Contact Seller",
        returnPolicy: "Return Policy",
        warranty: "Warranty",
        viewAll: "View All",
        writeReview: "Write a Review",
        rating: "Rating",
        allReviews: "All Reviews",
        thankYou: "Thank you for your purchase!",
        addedToCart: "Added to cart",
        addedToFavorites: "Added to favorites",
        shareProduct: "Share Product",
      },
      buttons: {
        continueShopping: "Continue Shopping",
        viewCart: "View Cart",
        checkout: "Checkout",
      },
      checkout: {
        title: "Checkout",
        step1: "Shipping Information",
        step2: "Order Confirmation",
        next: "Next",
        back: "Back",
        placeOrder: "Place Order",
        continueShopping: "Continue Shopping",
        deliveryAddress: "Delivery Address",
        addNewAddress: "Add New Address",
        selectAddress: "Select Address",
        contactInfo: "Contact Information",
        shippingMethod: "Shipping Method",
        paymentMethod: "Payment Method",
        orderSummary: "Order Summary",
        items: "Items",
        shipping: "Shipping",
        tax: "Tax",
        total: "Total",
        subtotal: "Subtotal",
        discount: "Discount",
        selectShipping: "Select Shipping Method",
        selectPayment: "Select Payment Method",
        saveAddress: "Save this address",
        deliveryTime: "Delivery Time",
        free: "Free",
        standard: "Standard",
        express: "Express",
        cashOnDelivery: "Cash on Delivery",
        creditCard: "Credit Card",
        paypal: "PayPal",
        applePay: "Apple Pay",
        googlePay: "Google Pay",
        orderSuccess: "Order Placed Successfully!",
        orderNumber: "Order Number",
        estimatedDelivery: "Estimated Delivery",
        trackOrder: "Track Your Order",
        thankYou: "Thank you for your purchase!",
        confirmation: "Order Confirmation",
      },
      form: {
        fullName: "Full Name",
        phoneNumber: "Phone Number",
        email: "Email Address",
        address: "Street Address",
        apartment: "Apartment, Suite, etc.",
        city: "City",
        state: "State/Province",
        zipCode: "ZIP/Postal Code",
        country: "Country",
        saveAddress: "Save address for future use",
        notes: "Delivery Notes (Optional)",
        notesPlaceholder: "Any special instructions for delivery",
      },
      validation: {
        phoneRequired: "Phone number is required",
        phoneInvalid: "Invalid phone number",
        emailRequired: "Email is required",
        emailInvalid: "Invalid email address",
        addressRequired: "Address is required",
        cityRequired: "City is required",
        countryRequired: "Country is required",
        zipRequired: "ZIP code is required",
        cardNumberRequired: "Card number is required",
        cardNumberInvalid: "Invalid card number",
        expiryRequired: "Expiry date is required",
        expiryInvalid: "Invalid expiry date",
        cvvRequired: "CVV is required",
        cvvInvalid: "Invalid CVV",
        nameRequired: "Cardholder name is required",
      },
      payment: {
        title: "Payment",
        selectMethod: "Select Payment Method",
        creditCard: "Credit/Debit Card",
        paypal: "PayPal",
        applePay: "Apple Pay",
        googlePay: "Google Pay",
        cashOnDelivery: "Cash on Delivery",
        bankTransfer: "Bank Transfer",
        cardNumber: "Card Number",
        expiryDate: "Expiry Date",
        cvv: "CVV",
        cardHolder: "Cardholder Name",
        saveCard: "Save card for future payments",
        pay: "Pay Now",
        processing: "Processing Payment...",
        success: "Payment Successful!",
        failed: "Payment Failed",
        retry: "Try Again",
        securePayment: "Secure Payment",
        poweredBy: "Powered by",
        totalAmount: "Total Amount",
        orderTotal: "Order Total",
        transactionId: "Transaction ID",
        paymentMethod: "Payment Method",
        paymentDetails: "Payment Details",
        billingAddress: "Billing Address",
        sameAsShipping: "Same as shipping address",
        addNewCard: "Add New Card",
        savedCards: "Saved Cards",
        useDifferentCard: "Use Different Card",
        processingTime: "Processing may take a few seconds",
        verification: "Verifying payment details",
        thankYou: "Thank you for your payment!",
        redirecting: "Redirecting to payment gateway...",
        card: 'Credit/Debit Card',
        bank: 'Bank Transfer',
        cash: 'Cash on Delivery',
        paid: 'Paid',
      },
      status: {
        pending: "Pending",
        processing: "Processing",
        completed: "Completed",
        failed: "Failed",
        refunded: "Refunded",
        cancelled: "Cancelled",
      },
      tracking: {
        title: "Order Tracking",
        orderNumber: "Order Number",
        orderDate: "Order Date",
        estimatedDelivery: "Estimated Delivery",
        deliveryAddress: "Delivery Address",
        currentStatus: "Current Status",
        statusTimeline: "Status Timeline",
        trackAnother: "Track Another Order",
        viewDetails: "View Order Details",
        contactSupport: "Contact Support",
        shareTracking: "Share Tracking",
        needHelp: "Need Help?",
        deliveredOn: "Delivered on",
        expectedBy: "Expected by",
        delayed: "Delayed",
        onTime: "On Time",
        trackShipment: "Track Shipment",
        deliveryProgress: "Delivery Progress",
        packageInfo: "Package Information",
        carrier: "Carrier",
        trackingNumber: "Tracking Number",
        lastUpdate: "Last Update",
        nextUpdate: "Next Update",
        refresh: "Refresh Status",
        autoRefresh: "Auto-Refresh Every 30s",
        mapView: "Map View",
        listView: "List View",
        mapNotAvailable: "Map Not Available",
        mapNotAvailableDescription: "Map view is not supported on web platform. Location information is shown below.",
        mapNotReady: "Map Not Ready",
        mapNotReadyDescription: "Map functionality is currently being set up. Please check back later.",
        currentLocation: "Current Location",
        destination: "Destination",
        deliveryPerson: "Delivery Person",
      },
      orderStatus: {
        placed: "Order Placed",
        pending: 'Pending',
        confirmed: 'Confirmed',
        processing: 'Processing',
        packaged: 'Packaged',
        shipped: 'Shipped',
        outForDelivery: 'Out for Delivery',
        delivered: 'Delivered',
        cancelled: 'Cancelled',
        returned: 'Returned',
        refunded: 'Refunded',
      },
      timeline: {
        orderReceived: "Order received",
        paymentConfirmed: "Payment confirmed",
        preparingOrder: "Preparing your order",
        qualityCheck: "Quality check",
        packaging: "Packaging",
        handedToCarrier: "Handed to carrier",
        inTransit: "In transit",
        outForDelivery: "Out for delivery",
        delivered: "Delivered to your address",
        estimatedTime: "Estimated time",
        actualTime: "Actual time",
        delayed: "Delayed by {hours} hours",
        aheadOfSchedule: "Ahead of schedule",
      },
      delivery: {
        progress: "Delivery Progress",
        eta: "ETA",
        carrier: "Carrier",
        driver: "Driver",
        contactDriver: "Contact Driver",
        liveTracking: "Live Tracking",
        deliveryWindow: "Delivery Window",
        morning: "Morning (9AM - 12PM)",
        afternoon: "Afternoon (12PM - 5PM)",
        evening: "Evening (5PM - 9PM)",
        signatureRequired: "Signature Required",
        leaveAtDoor: "Leave at Door",
        deliveryNotes: "Delivery Notes",
      },
      orders: {
        title: "My Orders",
        history: "Order History",
        recent: "Recent Orders",
        all: "All Orders",
        active: "Active Orders",
        completed: "Completed",
        cancelled: "Cancelled",
        emptyTitle: "No Orders Yet",
        emptyDescription: "You haven't placed any orders yet.",
        startShopping: "Start Shopping",
        filter: "Filter Orders",
        sort: "Sort By",
        search: "Search orders...",
        order: "Order",
        date: "Date",
        items: "Items",
        amount: "Amount",
        status: "Status",
        viewDetails: "View Details",
        trackOrder: "Track Order",
        reorder: "Reorder",
        writeReview: "Write Review",
        cancelOrder: "Cancel Order",
        returnItem: "Return Item",
        buyAgain: "Buy Again",
        invoice: "View Invoice",
        downloadInvoice: "Download Invoice",
        needHelp: "Need help with this order?",
        contactSupport: "Contact Support",
        estimatedDelivery: "Estimated Delivery",
        deliveredOn: "Delivered on",
        orderPlaced: "Order Placed",
        orderTotal: "Order Total",
        shippingAddress: "Shipping Address",
        paymentMethod: "Payment Method",
        orderSummary: "Order Summary",
      },
      sortOptions: {
        newest: "Newest First",
        oldest: "Oldest First",
        highestAmount: "Highest Amount",
        lowestAmount: "Lowest Amount",
      },
      orderDetails: {
        statusPending: 'Your order is being reviewed',
        statusConfirmed: 'Order confirmed, preparing to ship',
        statusProcessing: 'We are processing your order',
        statusShipped: 'Your order is on the way',
        statusDelivered: 'Your order has been delivered',
        statusCancelled: 'Order has been cancelled',
        statusReturned: 'Order has been returned',
        tracking: 'Tracking Information',
        notes: 'Order Notes',
        cannotOpenInvoice: 'Cannot open invoice. Please try again later.',
        invoiceError: 'Error opening invoice',
        supportMessage: 'How would you like to contact our support team?',
        noFilterResults: 'No orders match your filters',
        trackingNotAvailable: 'Tracking details are not available at the moment.',
        reorderConfirm: 'Add all items from this order to your cart?',
        reorderSuccess: 'Items have been added to your cart!',
        cancelSuccess: 'Order has been cancelled successfully',
      },
      profile: {
        title: "My Profile",
        editProfile: "Edit Profile",
        personalInfo: "Personal Information",
        contactInfo: "Contact Information",
        preferences: "Preferences",
        account: "Account",
        security: "Security",
        
        // Разделы
        orders: "My Orders",
        wishlist: "Wishlist",
        addresses: "Shipping Addresses",
        paymentMethods: "Payment Methods",
        settings: "Settings",
        notifications: "Notifications",
        language: "Language",
        theme: "Theme",
        help: "Help & Support",
        about: "About App",
        logout: "Log Out",
        
        // Поля
        name: "Full Name",
        email: "Email Address",
        phone: "Phone Number",
        birthDate: "Birth Date",
        gender: "Gender",
        location: "Location",
        memberSince: "Member Since",
        
        // Действия
        save: "Save Changes",
        cancel: "Cancel",
        deleteAccount: "Delete Account",
        changePassword: "Change Password",
        
        // Статус
        verified: "Verified",
        notVerified: "Not Verified",
        premium: "Premium Member",
        regular: "Regular Member",
      },
      support: {
        title: "Help & Support",
        faq: "FAQ",
        contact: "Contact Us",
        liveChat: "Live Chat",
        email: "Email Support",
        phone: "Phone Support",
        businessHours: "Business Hours",
        responseTime: "Response Time",
        
        topics: {
          orders: "Orders & Shipping",
          returns: "Returns & Refunds",
          products: "Products & Stock",
          payment: "Payment Issues",
          account: "Account Issues",
          technical: "Technical Support",
        },
      },
      logout: {
        title: "Log Out",
        message: "Are you sure you want to log out?",
        confirm: "Yes, Log Out",
        cancel: "Cancel",
        success: "You have been logged out successfully",
      },
      theme: {
        light: "Light",
        dark: "Dark",
        auto: "Auto",
      },
      settings: {
        appSettings: "App Settings",
        notificationSettings: "Notifications",
        privacySettings: "Privacy",
        dataUsage: "Data Usage",
        clearCache: "Clear Cache",
        storage: "Storage Usage",
        
        // Настройки уведомлений
        pushNotifications: "Push Notifications",
        emailNotifications: "Email Notifications",
        smsNotifications: "SMS Notifications",
        orderUpdates: "Order Updates",
        promotions: "Promotions & Offers",
        priceDrops: "Price Drops",
        newArrivals: "New Arrivals",
        
        // Настройки приватности
        showActivity: "Show My Activity",
        showWishlist: "Show My Wishlist",
        personalizedAds: "Personalized Ads",
        dataCollection: "Data Collection",
        title: "Settings",
        subtitle: "Customize your app experience",
        sections: {
          general: "General",
          notifications: "Notifications",
          privacy: "Privacy & Security",
          about: "About",
          support: "Support"
        },
        
        // Общие настройки
        language: "Language",
        languageDescription: "Choose your preferred language",
        theme: "App Theme",
        themeDescription: "Choose light, dark or auto mode",
        currency: "Currency",
        currencyDescription: "Select your preferred currency",
        
        // Уведомления
        notifications: "Notifications",
        notificationsDescription: "Manage your notification preferences",
        stockAlerts: "Stock Alerts",
        
        // Конфиденциальность
        privacy: "Privacy",
        privacyDescription: "Control your data and privacy settings",
        dataCollectionDescription: "Allow data collection for better experience",
        personalizedAdsDescription: "Show ads based on your interests",
        showActivityDescription: "Show your activity to other users",
        clearSearchHistory: "Clear Search History",
        deleteAccount: "Delete Account",
        
        // О приложении
        about: "About App",
        version: "Version",
        buildNumber: "Build Number",
        terms: "Terms of Service",
        privacyPolicy: "Privacy Policy",
        rateApp: "Rate App",
        shareApp: "Share App",
        contactSupport: "Contact Support",
        
        // Поддержка
        help: "Help & Support",
        faq: "Frequently Asked Questions",
        contactUs: "Contact Us",
        reportIssue: "Report an Issue",
        suggestFeature: "Suggest a Feature",
        
        // Действия
        save: "Save",
        cancel: "Cancel",
        reset: "Reset to Default",
        apply: "Apply",
        
        // Статусы
        enabled: "Enabled",
        disabled: "Disabled",
        auto: "Auto",
        light: "Light",
        dark: "Dark",
        
        // Подтверждения
        clearCacheConfirm: "Are you sure you want to clear app cache?",
        clearSearchConfirm: "Are you sure you want to clear search history?",
        deleteAccountConfirm: "This action cannot be undone. All your data will be permanently deleted.",
        resetConfirm: "Reset all settings to default values?",
        
        // Успешные сообщения
        cacheCleared: "Cache cleared successfully",
        searchCleared: "Search history cleared",
        settingsSaved: "Settings saved successfully",
        settingsReset: "Settings reset to default",
      },
      
      languages: {
        en: "English",
        ru: "Русский",
        ko: "한국어",
        auto: "System Default",
      },
      
      currencies: {
        usd: "US Dollar ($)",
        eur: "Euro (€)",
        krw: "Korean Won (₩)",
        rub: "Russian Ruble (₽)",
      },
      errors: {
        // Общие ошибки
        somethingWentWrong: "Something went wrong",
        tryAgain: "Try Again",
        goBack: "Go Back",
        contactSupport: "Contact Support",
        reload: "Reload",
        
        // Нет интернета
        noInternet: {
          title: "No Internet Connection",
          description: "Please check your internet connection and try again",
          tips: "Make sure Wi-Fi or mobile data is turned on",
          airplaneMode: "Turn off Airplane Mode",
          wifi: "Turn on Wi-Fi",
          mobileData: "Turn on Mobile Data",
        },
        
        // Нет товаров
        noProducts: {
          title: "No Products Found",
          description: "We couldn't find any products matching your criteria",
          tryDifferentFilters: "Try different filters or search terms",
          clearFilters: "Clear Filters",
          browseAll: "Browse All Products",
          checkBack: "Check back soon for new arrivals",
        },
        
        // Ошибка оплаты
        paymentError: {
          title: "Payment Failed",
          description: "We couldn't process your payment",
          commonReasons: "Common reasons:",
          insufficientFunds: "Insufficient funds",
          expiredCard: "Expired card",
          declined: "Card declined by issuer",
          tryDifferentMethod: "Try a different payment method",
          contactBank: "Contact your bank",
          retryPayment: "Retry Payment",
        },
        
        // Пустая корзина
        emptyCart: {
          title: "Your Cart is Empty",
          description: "Add some products to get started",
          startShopping: "Start Shopping",
          browseProducts: "Browse Products",
        },
        
        // Пустые заказы
        emptyOrders: {
          title: "No Orders Yet",
          description: "You haven't placed any orders yet",
          startShopping: "Start Shopping",
          browseProducts: "Browse Products",
        },
        
        // Пустой вишлист
        emptyWishlist: {
          title: "Wishlist is Empty",
          description: "Save products you like to your wishlist",
          discoverProducts: "Discover Products",
          browseTrending: "Browse Trending",
        },
        
        // Пустой поиск
        emptySearch: {
          title: "No Results Found",
          description: "Try different keywords or filters",
          searchTips: "Search tips:",
          checkSpelling: "Check your spelling",
          broaderTerms: "Try broader search terms",
          fewerFilters: "Use fewer filters",
          clearSearch: "Clear Search",
        },
        
        // Ошибка сервера
        serverError: {
          title: "Server Error",
          description: "Something went wrong on our end",
          tryAgainLater: "Please try again in a few minutes",
          statusCode: "Error Code",
          technicalDetails: "Technical Details",
        },
        
        // Не найдено
        notFound: {
          title: "Page Not Found",
          description: "The page you're looking for doesn't exist",
          goHome: "Go to Home",
          goBack: "Go Back",
        },
        
        // Доступ запрещен
        unauthorized: {
          title: "Access Denied",
          description: "You don't have permission to access this page",
          login: "Log In",
          signUp: "Sign Up",
        },
        
        // Ошибка загрузки
        loadingError: {
          title: "Failed to Load",
          description: "We couldn't load the content",
          checkConnection: "Check your internet connection",
        },
      },
      
      // Общие действия
      actions: {
        retry: "Retry",
        refresh: "Refresh",
        learnMore: "Learn More",
        dismiss: "Dismiss",
        continue: "Continue",
        cancel: "Cancel",
        ok: "OK",
        yes: "Yes",
        no: "No",
      },
      navigation: {
        home: "Home",
        search: "Search",
        cart: "Cart",
        orders: "Orders",
        profile: "Profile",
        categories: "Categories",
        wishlist: "Wishlist",
        settings: "Settings",
        checkout: "Checkout"
      },
    },
  },
  ru: {
    translation: {
      appName: "KoreanStore",
      splash: {
        loading: "Загрузка...",
      },
      onboarding: {
        title1: "Найдите и купите товары из Кореи",
        description1: "Откройте для себя аутентичные корейские косметические средства, закуски и модные товары",
        title2: "Быстрая и надежная доставка",
        description2: "Получайте свои заказы быстро с отслеживанием в реальном времени",
        title3: "Отслеживание заказа",
        description3: "Отслеживайте статус заказа на каждом этапе пути",
        title4: "Безопасные платежи",
        description4: "Несколько безопасных способов оплаты для вашего спокойствия",
        next: "Далее",
        skip: "Пропустить",
        getStarted: "Начать",
      },
      common: {
        continue: "Продолжить",
        skip: "Пропустить",
      },
      auth: {
        login: "Вход",
        register: "Регистрация",
        email: "Электронная почта",
        phone: "Телефон",
        password: "Пароль",
        confirmPassword: "Подтвердите пароль",
        firstName: "Имя",
        lastName: "Фамилия",
        forgotPassword: "Забыли пароль?",
        noAccount: "Нет аккаунта?",
        hasAccount: "Уже есть аккаунт?",
        signIn: "Войти",
        signUp: "Зарегистрироваться",
        createAccount: "Создать аккаунт",
        orContinueWith: "Или продолжить с",
        rememberMe: "Запомнить меня",
        validation: {
          required: "Это поле обязательно",
          invalidEmail: "Некорректный адрес почты",
          invalidPhone: "Некорректный номер телефона",
          passwordLength: "Пароль должен содержать минимум 6 символов",
          passwordMismatch: "Пароли не совпадают",
          weakPassword: "Пароль слишком простой",
        },
        errors: {
          invalidCredentials: "Неверный email или пароль",
          emailExists: "Такой email уже существует",
          networkError: "Ошибка сети. Попробуйте снова",
          unknownError: "Что-то пошло не так",
        },
        success: {
          login: "Вход выполнен успешно",
          registration: "Регистрация прошла успешно",
        },
      },
      home: {
        title: "KoreanStore",
        searchPlaceholder: "Поиск товаров...",
        categories: "Категории",
        seeAll: "Все",
        featured: "Рекомендуемые",
        newArrivals: "Новинки",
        bestSellers: "Бестселлеры",
        specialOffers: "Спецпредложения",
        addToCart: "В корзину",
        outOfStock: "Нет в наличии",
        sale: "Скидка",
        new: "Новый",
        price: "Цена",
        sort: {
          default: "По умолчанию",
          priceLowHigh: "Цена: по возрастанию",
          priceHighLow: "Цена: по убыванию",
          newest: "Сначала новые",
          popularity: "По популярности",
          rating: "По рейтингу",
        },
        filter: {
          title: "Фильтр",
          apply: "Применить",
          clear: "Очистить все",
          category: "Категория",
          priceRange: "Диапазон цен",
          rating: "Рейтинг",
          availability: "Наличие",
          inStock: "Только в наличии",
        },
      },
      categories: {
        cosmetics: "Косметика",
        skincare: "Уход за кожей",
        snacks: "Снэки",
        fashion: "Мода",
        homeDecor: "Декор для дома",
        electronics: "Электроника",
        all: "Все товары",
      },
      search: {
        title: "Поиск товаров",
        placeholder: "Что вы ищете?",
        recentSearches: "Недавние поиски",
        popularSearches: "Популярные поиски",
        clearRecent: "Очистить историю",
        noResults: "Товары не найдены",
        suggestions: "Попробуйте поискать:",
        categories: "Поиск по категориям",
        resetFilters: "Сбросить фильтры",
        applyFilters: "Применить фильтры",
        price: "Цена",
        minPrice: "Мин. цена",
        maxPrice: "Макс. цена",
        sortBy: "Сортировать по",
        filters: "Фильтры",
        results: "результаты",
        showing: "Показано",
        of: "из",
      },
      filters: {
        newArrivals: "Новинки",
        onSale: "Распродажа",
        inStock: "В наличии",
        outOfStock: "Нет в наличии",
        freeShipping: "Бесплатная доставка",
        highRated: "Высокий рейтинг (4.5+)",
        brands: "Бренды",
        colors: "Цвета",
        sizes: "Размеры",
        all: "Все",
        apply: "Применить",
        clearAll: "Очистить всё",
        priceRange: "Диапазон цен",
        customerRating: "Рейтинг покупателей",
        availability: "Наличие",
        shipping: "Доставка",
        brand: "Бренд",
        color: "Цвет",
        size: "Размер",
        pending: "В ожидании",
        processing: "Обработка",
        shipped: "Отправлен",
        delivered: "Доставлен",
        cancelled: "Отменен",
        returned: "Возвращен",
        last30Days: "Последние 30 дней",
        last6Months: "Последние 6 месяцев",
        lastYear: "Последний год",
        customRange: "Выбрать период",
      },
      sort: {
        relevance: "Релевантность",
        newest: "Новые",
        priceLowHigh: "Цена: по возрастанию",
        priceHighLow: "Цена: по убыванию",
        popularity: "Популярность",
        rating: "Рейтинг",
        bestMatch: "Лучшее соответствие",
      },
      product: {
        addToCart: "В корзину",
        buyNow: "Купить сейчас",
        description: "Описание",
        specifications: "Характеристики",
        reviews: "Отзывы",
        relatedProducts: "Похожие товары",
        share: "Поделиться",
        favorite: "В избранное",
        removeFavorite: "Убрать из избранного",
        inStock: "В наличии",
        outOfStock: "Нет в наличии",
        quantity: "Количество",
        shipping: "Доставка",
        freeShipping: "Бесплатная доставка",
        estimatedDelivery: "Примерный срок доставки",
        days: "дней",
        color: "Цвет",
        size: "Размер",
        selectOption: "Выберите вариант",
        sellerInfo: "Информация о продавце",
        contactSeller: "Связаться с продавцом",
        returnPolicy: "Возврат",
        warranty: "Гарантия",
        viewAll: "Посмотреть все",
        writeReview: "Написать отзыв",
        rating: "Рейтинг",
        allReviews: "Все отзывы",
        thankYou: "Спасибо за покупку!",
        addedToCart: "Добавлено в корзину",
        addedToFavorites: "Добавлено в избранное",
        shareProduct: "Поделиться товаром",
      },
      buttons: {
        continueShopping: "Продолжить покупки",
        viewCart: "Перейти в корзину",
        checkout: "Оформить заказ",
      },
      checkout: {
        title: "Оформление заказа",
        step1: "Информация о доставке",
        step2: "Подтверждение заказа",
        next: "Далее",
        back: "Назад",
        placeOrder: "Оформить заказ",
        continueShopping: "Продолжить покупки",
        deliveryAddress: "Адрес доставки",
        addNewAddress: "Добавить новый адрес",
        selectAddress: "Выберите адрес",
        contactInfo: "Контактная информация",
        shippingMethod: "Способ доставки",
        paymentMethod: "Способ оплаты",
        orderSummary: "Итог заказа",
        items: "Товары",
        shipping: "Доставка",
        tax: "Налог",
        total: "Итого",
        subtotal: "Промежуточный итог",
        discount: "Скидка",
        selectShipping: "Выберите способ доставки",
        selectPayment: "Выберите способ оплаты",
        saveAddress: "Сохранить этот адрес",
        deliveryTime: "Время доставки",
        free: "Бесплатно",
        standard: "Стандартная",
        express: "Экспресс",
        cashOnDelivery: "Наложенный платеж",
        creditCard: "Банковская карта",
        paypal: "PayPal",
        applePay: "Apple Pay",
        googlePay: "Google Pay",
        orderSuccess: "Заказ успешно оформлен!",
        orderNumber: "Номер заказа",
        estimatedDelivery: "Примерное время доставки",
        trackOrder: "Отследить заказ",
        thankYou: "Спасибо за покупку!",
        confirmation: "Подтверждение заказа",
      },
      form: {
        fullName: "ФИО получателя",
        phoneNumber: "Номер телефона",
        email: "Адрес электронной почты",
        address: "Улица, дом",
        apartment: "Квартира, офис и т.д.",
        city: "Город",
        state: "Область/Регион",
        zipCode: "Почтовый индекс",
        country: "Страна",
        saveAddress: "Сохранить адрес для будущих заказов",
        notes: "Комментарий к доставке (необязательно)",
        notesPlaceholder: "Особые инструкции для доставки",
      },
      validation: {
        phoneRequired: "Укажите номер телефона",
        phoneInvalid: "Неверный номер телефона",
        emailRequired: "Укажите email",
        emailInvalid: "Неверный email адрес",
        addressRequired: "Укажите адрес",
        cityRequired: "Укажите город",
        countryRequired: "Укажите страну",
        zipRequired: "Укажите почтовый индекс",
        cardNumberRequired: "Введите номер карты",
        cardNumberInvalid: "Неверный номер карты",
        expiryRequired: "Введите срок действия",
        expiryInvalid: "Неверный срок действия",
        cvvRequired: "Введите CVV код",
        cvvInvalid: "Неверный CVV код",
        nameRequired: "Введите имя владельца карты",
      },
      payment: {
        title: "Оплата",
        selectMethod: "Выберите способ оплаты",
        creditCard: "Банковская карта",
        paypal: "PayPal",
        applePay: "Apple Pay",
        googlePay: "Google Pay",
        cashOnDelivery: "Наложенный платеж",
        bankTransfer: "Банковский перевод",
        cardNumber: "Номер карты",
        expiryDate: "Срок действия",
        cvv: "CVV код",
        cardHolder: "Имя владельца карты",
        saveCard: "Сохранить карту для будущих платежей",
        pay: "Оплатить сейчас",
        processing: "Обработка платежа...",
        success: "Оплата прошла успешно!",
        failed: "Ошибка оплаты",
        retry: "Попробовать снова",
        securePayment: "Безопасный платеж",
        poweredBy: "Технология",
        totalAmount: "Сумма к оплате",
        orderTotal: "Итог заказа",
        transactionId: "ID транзакции",
        paymentMethod: "Способ оплаты",
        paymentDetails: "Детали платежа",
        billingAddress: "Платежный адрес",
        sameAsShipping: "Совпадает с адресом доставки",
        addNewCard: "Добавить новую карту",
        savedCards: "Сохраненные карты",
        useDifferentCard: "Использовать другую карту",
        processingTime: "Обработка может занять несколько секунд",
        verification: "Проверка платежных данных",
        thankYou: "Спасибо за оплату!",
        redirecting: "Перенаправление на платежный шлюз...",
        card: 'Кредитная/Дебетовая карта',
        bank: 'Банковский перевод',
        cash: 'Наличные при доставке',
        paid: 'Оплачен',
      },
      status: {
        pending: "В ожидании",
        processing: "Обработка",
        completed: "Завершено",
        failed: "Ошибка",
        refunded: "Возврат",
        cancelled: "Отменено",
      },
      tracking: {
        title: "Отслеживание заказа",
        orderNumber: "Номер заказа",
        orderDate: "Дата заказа",
        estimatedDelivery: "Примерная доставка",
        deliveryAddress: "Адрес доставки",
        currentStatus: "Текущий статус",
        statusTimeline: "История статусов",
        trackAnother: "Отследить другой заказ",
        viewDetails: "Посмотреть детали заказа",
        contactSupport: "Связаться с поддержкой",
        shareTracking: "Поделиться отслеживанием",
        needHelp: "Нужна помощь?",
        deliveredOn: "Доставлен",
        expectedBy: "Ожидается к",
        delayed: "Задержка",
        onTime: "Вовремя",
        trackShipment: "Отследить отправление",
        deliveryProgress: "Прогресс доставки",
        packageInfo: "Информация о посылке",
        carrier: "Перевозчик",
        trackingNumber: "Трек-номер",
        lastUpdate: "Последнее обновление",
        nextUpdate: "Следующее обновление",
        refresh: "Обновить статус",
        autoRefresh: "Автообновление каждые 30с",
        mapView: "Вид карты",
        listView: "Вид списка",
        mapNotAvailable: "Карта недоступна",
        mapNotAvailableDescription: "Просмотр карты не поддерживается на веб-платформе. Информация о местоположении показана ниже.",
        mapNotReady: "Карта не готова",
        mapNotReadyDescription: "Функциональность карты в настоящее время настраивается. Пожалуйста, зайдите позже.",
        currentLocation: "Текущее местоположение",
        destination: "Пункт назначения",
        deliveryPerson: "Доставщик",
      },
      orderStatus: {
        placed: "Заказ оформлен",
        processing: "Обработка",
        packaged: "Упакован",
        shipped: "Отправлен",
        outForDelivery: "В доставке",
        delivered: "Доставлен",
        cancelled: "Отменен",
        returned: "Возвращен",
        refunded: "Возврат средств",
        pending: 'В ожидании',
        confirmed: 'Подтвержден',
      },
      timeline: {
        orderReceived: "Заказ получен",
        paymentConfirmed: "Оплата подтверждена",
        preparingOrder: "Подготовка заказа",
        qualityCheck: "Проверка качества",
        packaging: "Упаковка",
        handedToCarrier: "Передан перевозчику",
        inTransit: "В пути",
        outForDelivery: "В доставке",
        delivered: "Доставлен по адресу",
        estimatedTime: "Примерное время",
        actualTime: "Фактическое время",
        delayed: "Задержка на {hours} часов",
        aheadOfSchedule: "Опережает график",
      },
      delivery: {
        progress: "Прогресс доставки",
        eta: "Ожидаемое время",
        carrier: "Перевозчик",
        driver: "Водитель",
        contactDriver: "Связаться с водителем",
        liveTracking: "Отслеживание в реальном времени",
        deliveryWindow: "Окно доставки",
        morning: "Утро (9:00 - 12:00)",
        afternoon: "День (12:00 - 17:00)",
        evening: "Вечер (17:00 - 21:00)",
        signatureRequired: "Требуется подпись",
        leaveAtDoor: "Оставить у двери",
        deliveryNotes: "Примечания к доставке",
      },
      orders: {
        title: "Мои заказы",
        history: "История заказов",
        recent: "Недавние заказы",
        all: "Все заказы",
        active: "Активные заказы",
        completed: "Завершенные",
        cancelled: "Отмененные",
        emptyTitle: "Заказов пока нет",
        emptyDescription: "Вы еще не совершали покупок.",
        startShopping: "Начать покупки",
        filter: "Фильтр заказов",
        sort: "Сортировать по",
        search: "Поиск заказов...",
        order: "Заказ",
        date: "Дата",
        items: "Товары",
        amount: "Сумма",
        status: "Статус",
        viewDetails: "Подробнее",
        trackOrder: "Отследить заказ",
        reorder: "Повторить заказ",
        writeReview: "Написать отзыв",
        cancelOrder: "Отменить заказ",
        returnItem: "Вернуть товар",
        buyAgain: "Купить снова",
        invoice: "Смотреть счет",
        downloadInvoice: "Скачать счет",
        needHelp: "Нужна помощь с заказом?",
        contactSupport: "Связаться с поддержкой",
        estimatedDelivery: "Примерная доставка",
        deliveredOn: "Доставлен",
        orderPlaced: "Заказ оформлен",
        orderTotal: "Итого",
        shippingAddress: "Адрес доставки",
        paymentMethod: "Способ оплаты",
        orderSummary: "Детали заказа",
      },
      sortOptions: {
        newest: "Сначала новые",
        oldest: "Сначала старые",
        highestAmount: "По сумме (убыв.)",
        lowestAmount: "По сумме (возр.)",
      },
      orderDetails: {
        statusPending: 'Ваш заказ проверяется',
        statusConfirmed: 'Заказ подтвержден, готовим к отправке',
        statusProcessing: 'Обрабатываем ваш заказ',
        statusShipped: 'Ваш заказ в пути',
        statusDelivered: 'Ваш заказ доставлен',
        statusCancelled: 'Заказ отменен',
        statusReturned: 'Заказ возвращен',
        tracking: 'Информация об отслеживании',
        notes: 'Примечания к заказу',
        cannotOpenInvoice: 'Не удается открыть счет. Попробуйте позже.',
        invoiceError: 'Ошибка при открытии счета',
        supportMessage: 'Как вы хотите связаться с нашей поддержкой?',
        noFilterResults: 'Нет заказов, соответствующих фильтрам',
        trackingNotAvailable: 'Информация об отслеживании временно недоступна.',
        reorderConfirm: 'Добавить все товары из этого заказа в корзину?',
        reorderSuccess: 'Товары добавлены в корзину!',
        cancelSuccess: 'Заказ успешно отменен',
      },
      profile: {
        title: "Мой профиль",
        editProfile: "Редактировать профиль",
        personalInfo: "Личная информация",
        contactInfo: "Контактная информация",
        preferences: "Настройки",
        account: "Аккаунт",
        security: "Безопасность",
        
        // Разделы
        orders: "Мои заказы",
        wishlist: "Избранное",
        addresses: "Адреса доставки",
        paymentMethods: "Способы оплаты",
        settings: "Настройки",
        notifications: "Уведомления",
        language: "Язык",
        theme: "Тема",
        help: "Помощь и поддержка",
        about: "О приложении",
        logout: "Выйти",
        
        // Поля
        name: "Полное имя",
        email: "Email адрес",
        phone: "Номер телефона",
        birthDate: "Дата рождения",
        gender: "Пол",
        location: "Местоположение",
        memberSince: "Участник с",
        
        // Действия
        save: "Сохранить изменения",
        cancel: "Отмена",
        deleteAccount: "Удалить аккаунт",
        changePassword: "Изменить пароль",
        
        // Статус
        verified: "Подтверждено",
        notVerified: "Не подтверждено",
        premium: "Премиум участник",
        regular: "Обычный участник",
      },
      support: {
        title: "Помощь и поддержка",
        faq: "Частые вопросы",
        contact: "Связаться с нами",
        liveChat: "Онлайн чат",
        email: "Поддержка по email",
        phone: "Поддержка по телефону",
        businessHours: "Часы работы",
        responseTime: "Время ответа",
        
        topics: {
          orders: "Заказы и доставка",
          returns: "Возвраты и возврат средств",
          products: "Товары и наличие",
          payment: "Проблемы с оплатой",
          account: "Проблемы с аккаунтом",
          technical: "Техническая поддержка",
        },
      },
      logout: {
        title: "Выход",
        message: "Вы уверены, что хотите выйти?",
        confirm: "Да, выйти",
        cancel: "Отмена",
        success: "Вы успешно вышли из системы",
      },
      theme: {
        light: "Светлая",
        dark: "Темная",
        auto: "Авто",
      },
      settings: {
        title: "Настройки",
        appSettings: "Настройки приложения",
        notificationSettings: "Уведомления",
        privacySettings: "Приватность",
        dataUsage: "Использование данных",
        clearCache: "Очистить кэш",
        storage: "Использование памяти",
        
        // Настройки уведомлений
        pushNotifications: "Push-уведомления",
        emailNotifications: "Email-уведомления",
        smsNotifications: "SMS-уведомления",
        orderUpdates: "Обновления заказов",
        promotions: "Акции и предложения",
        priceDrops: "Снижение цен",
        newArrivals: "Новые поступления",
        
        // Настройки приватности
        showActivity: "Показывать мою активность",
        showWishlist: "Показывать мой вишлист",
        personalizedAds: "Персонализированная реклама",
        dataCollection: "Сбор данных",
        subtitle: "Настройте работу приложения",
        sections: {
          general: "Общие",
          notifications: "Уведомления",
          privacy: "Конфиденциальность",
          about: "О приложении",
          support: "Поддержка"
        },
        
        // Общие настройки
        language: "Язык",
        languageDescription: "Выберите предпочитаемый язык",
        theme: "Тема приложения",
        themeDescription: "Светлая, темная или автоматическая тема",
        currency: "Валюта",
        currencyDescription: "Выберите предпочитаемую валюту",
        
        // Уведомления
        notifications: "Уведомления",
        notificationsDescription: "Управление уведомлениями",
        stockAlerts: "Уведомления о наличии",
        
        // Конфиденциальность
        privacy: "Конфиденциальность",
        privacyDescription: "Управление данными и настройками приватности",
        dataCollectionDescription: "Разрешить сбор данных для улучшения опыта",
        personalizedAdsDescription: "Показывать рекламу на основе интересов",
        showActivityDescription: "Показывать вашу активность другим пользователям",
        clearSearchHistory: "Очистить историю поиска",
        deleteAccount: "Удалить аккаунт",
        
        // О приложении
        about: "О приложении",
        version: "Версия",
        buildNumber: "Номер сборки",
        terms: "Условия использования",
        privacyPolicy: "Политика конфиденциальности",
        rateApp: "Оценить приложение",
        shareApp: "Поделиться приложением",
        contactSupport: "Связаться с поддержкой",
        
        // Поддержка
        help: "Помощь и поддержка",
        faq: "Частые вопросы",
        contactUs: "Связаться с нами",
        reportIssue: "Сообщить о проблеме",
        suggestFeature: "Предложить функцию",
        
        // Действия
        save: "Сохранить",
        cancel: "Отмена",
        reset: "Сбросить",
        apply: "Применить",
        
        // Статусы
        enabled: "Включено",
        disabled: "Выключено",
        auto: "Авто",
        light: "Светлая",
        dark: "Темная",
        
        // Подтверждения
        clearCacheConfirm: "Очистить кэш приложения?",
        clearSearchConfirm: "Очистить историю поиска?",
        deleteAccountConfirm: "Это действие нельзя отменить. Все ваши данные будут удалены.",
        resetConfirm: "Сбросить все настройки?",
        
        // Успешные сообщения
        cacheCleared: "Кэш очищен",
        searchCleared: "История поиска очищена",
        settingsSaved: "Настройки сохранены",
        settingsReset: "Настройки сброшены",
      },
      
      languages: {
        en: "Английский",
        ru: "Русский",
        ko: "Корейский",
        auto: "Системная",
      },
      
      currencies: {
        usd: "Доллар США ($)",
        eur: "Евро (€)",
        krw: "Корейская вона (₩)",
        rub: "Российский рубль (₽)",
      },
      errors: {
        // Общие ошибки
        somethingWentWrong: "Что-то пошло не так",
        tryAgain: "Попробовать снова",
        goBack: "Назад",
        contactSupport: "Связаться с поддержкой",
        reload: "Перезагрузить",
        
        // Нет интернета
        noInternet: {
          title: "Нет подключения к интернету",
          description: "Проверьте подключение к интернету и попробуйте снова",
          tips: "Советы по устранению:",
          airplaneMode: "Выключите режим полета",
          wifi: "Включите Wi-Fi",
          mobileData: "Включите мобильные данные",
        },
        
        // Нет товаров
        noProducts: {
          title: "Товары не найдены",
          description: "Мы не нашли товаров по вашему запросу",
          tryDifferentFilters: "Попробуйте другие фильтры или поисковые запросы",
          clearFilters: "Сбросить фильтры",
          browseAll: "Посмотреть все товары",
          checkBack: "Загляните позже за новыми поступлениями",
        },
        
        // Ошибка оплаты
        paymentError: {
          title: "Ошибка оплаты",
          description: "Не удалось обработать платеж",
          commonReasons: "Возможные причины:",
          insufficientFunds: "Недостаточно средств",
          expiredCard: "Срок действия карты истек",
          declined: "Карта отклонена банком",
          tryDifferentMethod: "Попробуйте другой способ оплаты",
          contactBank: "Свяжитесь с вашим банком",
          retryPayment: "Повторить оплату",
        },
        
        // Пустая корзина
        emptyCart: {
          title: "Корзина пуста",
          description: "Добавьте товары, чтобы начать",
          startShopping: "Начать покупки",
          browseProducts: "Смотреть товары",
        },
        
        // Пустые заказы
        emptyOrders: {
          title: "Заказов пока нет",
          description: "Вы еще не совершали покупок",
          startShopping: "Начать покупки",
          browseProducts: "Смотреть товары",
        },
        
        // Пустой вишлист
        emptyWishlist: {
          title: "Список желаний пуст",
          description: "Сохраняйте понравившиеся товары в избранное",
          discoverProducts: "Открыть товары",
          browseTrending: "Смотреть популярное",
        },
        
        // Пустой поиск
        emptySearch: {
          title: "Ничего не найдено",
          description: "Попробуйте другие ключевые слова или фильтры",
          searchTips: "Советы по поиску:",
          checkSpelling: "Проверьте орфографию",
          broaderTerms: "Используйте более общие запросы",
          fewerFilters: "Используйте меньше фильтров",
          clearSearch: "Очистить поиск",
        },
        
        // Ошибка сервера
        serverError: {
          title: "Ошибка сервера",
          description: "Произошла ошибка на нашей стороне",
          tryAgainLater: "Попробуйте снова через несколько минут",
          statusCode: "Код ошибки",
          technicalDetails: "Технические детали",
        },
        
        // Не найдено
        notFound: {
          title: "Страница не найдена",
          description: "Запрашиваемая страница не существует",
          goHome: "На главную",
          goBack: "Назад",
        },
        
        // Доступ запрещен
        unauthorized: {
          title: "Доступ запрещен",
          description: "У вас нет прав для доступа к этой странице",
          login: "Войти",
          signUp: "Зарегистрироваться",
        },
        
        // Ошибка загрузки
        loadingError: {
          title: "Не удалось загрузить",
          description: "Не удалось загрузить контент",
          checkConnection: "Проверьте подключение к интернету",
        },
      },
      
      // Общие действия
      actions: {
        retry: "Повторить",
        refresh: "Обновить",
        learnMore: "Подробнее",
        dismiss: "Закрыть",
        continue: "Продолжить",
        cancel: "Отмена",
        ok: "OK",
        yes: "Да",
        no: "Нет",
      },
    },
  },
};

// Функция для получения сохраненного языка
const languageDetector = {
  type: 'languageDetector' as const,
  async: true,
  detect: async (callback: (lang: string) => void) => {
    try {
      const savedLanguage = await AsyncStorage.getItem('user-language');
      if (savedLanguage) {
        callback(savedLanguage);
      } else {
        const deviceLanguage = Localization.locale.split('-')[0];
        callback(['en', 'ru'].includes(deviceLanguage) ? deviceLanguage : 'en');
      }
    } catch (error) {
      console.error('Error detecting language:', error);
      callback('en');
    }
  },
  init: () => {},
  cacheUserLanguage: async (language: string) => {
    try {
      await AsyncStorage.setItem('user-language', language);
    } catch (error) {
      console.error('Error saving language:', error);
    }
  },
};

i18n
  .use(languageDetector)
  .use(initReactI18next)
  .init({
    resources,
    fallbackLng: 'en',
    interpolation: {
      escapeValue: false,
    },
    compatibilityJSON: 'v3',
  });

export default i18n;